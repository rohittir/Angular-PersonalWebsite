
<ng-container *ngIf="!matchesList">
    <div class="alert alert-primary" role="alert" style="text-align: center">
        <h6>Live cricket scores are coming soon...</h6>
    </div>
</ng-container>


<ng-container *ngIf="matchesList">

    <div class="alert alert-primary" role="alert">
        <strong>Live Cricket Score</strong>
        <button class="btn btn-primary btn-sm pull-right" (click)="refresh()">
            <span class="fa fa-sync"></span> Refresh
        </button>
        <!-- <button class="btn btn-primary btn-sm pull-right" (click)="showLive = !showLive" style="margin-right: 1%">
            {{(showLive)? 'Hide':'Show'}}
        </button> -->
        <!-- <br> -->
        <br>
        <div class="row" *ngIf="showLive && liveMatchesList?.length > 0">
            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" *ngFor="let live of liveMatchesList">
                <div class="card" style="margin-bottom: 3%">
                    <div class="card-header">
                        {{live.si}}
                    </div>
                    <div class="card-body">
                        <h6 class="card-subtitle">{{live.de}}</h6>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <hr *ngIf="liveMatchesList?.length > 0">


    <div class="row" *ngIf="!showMatchCommentary">
        <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" *ngFor="let match of matchesList">
            <!-- MatchesList -->
            <div class="card" style="margin-bottom: 5%; cursor: pointer" >
                <div class="card-header">
                    <strong>{{match.$.type}}: {{match.$.srs}} ({{match.$.mnum}})</strong>
                </div>
                <div class="card-body">
                    <h5 class="card-title">{{match.$.mchDesc}}</h5>
                    <h6 class="card-subtitle mb-2 text-muted" *ngFor="let state of match.state"> {{state.$.status}}</h6>
                    <h6 *ngFor="let score of match.mscr" class="card-text">
                        <!-- <div class="row"> -->
                            <!-- <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" *ngIf="score.btTm[0]?.Inngs?.length > 0"> -->
                                    <!-- Batting Team Score -->
                                <h6 class="card-text gap-bottom">
                                    <span>{{score.btTm[0].$.sName}}: </span>
                                    <br>
                                    <div *ngFor="let inn of score.btTm[0].Inngs">{{inn.$.desc}}: {{inn.$.r}}/{{inn.$.wkts}} ({{inn.$.ovrs}} Overs)</div>
                                </h6>
                            <!-- </div>
                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" *ngIf="score.blgTm[0]?.Inngs?.length > 0">

                                <h6 class="card-text">
                                    <span>{{score.blgTm[0].$.sName}}: </span>
                                    <br>
                                    <div *ngFor="let inn of score.blgTm[0].Inngs">{{inn.$.desc}}: {{inn.$.r}}/{{inn.$.wkts}} ({{inn.$.ovrs}} Overs)</div>
                                </h6>
                            </div>
                        </div> -->
                    </h6>
                    <h6 *ngIf="match.$?.grnd" class="card-text">
                        {{match.$.grnd}}
                        <span *ngIf="match.$?.vcity">, {{match.$.vcity}}</span>
                        <span *ngIf="match.$?.vcountry">, {{match.$.vcountry}}</span>
                    </h6>
                    <button class="btn btn-primary btn-sm pull-right" (click)="showMatchInfo(match)">
                        Show Commentary <span class="fa fa-chevron-circle-right"></span>
                    </button>

                </div>
            </div>
        </div>
    </div>

    <div *ngIf="showMatchCommentary && selectedCommentary">
        <button class="btn btn-primary" (click)="showMatchCommentary = !showMatchCommentary" style="margin-bottom: 5px">
            <span class="fa fa-chevron-circle-left"></span> Back
        </button>
        <div>
            <div *ngIf="selectedMatchInfo && !selectedCommentary" class="card">
                <div class="card-header">
                    <strong>{{selectedMatchInfo.$.type}}: {{selectedMatchInfo.$.srs}} ({{selectedMatchInfo.$.mnum}})</strong>
                </div>
                <div class="card-body">
                    <h5 class="card-title">{{selectedMatchInfo.$.mchDesc}}</h5>
                    <h5 class="card-title">This match is yet to be started</h5>
                    <hr>
                    <h6 class="card-subtitle mb-2 text-muted" *ngFor="let state of selectedMatchInfo.state"> {{state.$.status}}</h6>
                    <h6 *ngIf="selectedMatchInfo.$?.grnd" class="card-text">
                        {{selectedMatchInfo.$.grnd}}
                        <span *ngIf="selectedMatchInfo.$?.vcity">, {{selectedMatchInfo.$.vcity}}</span>
                        <span *ngIf="selectedMatchInfo.$?.vcountry">, {{selectedMatchInfo.$.vcountry}}</span>
                    </h6>

                </div>
            </div>

            <div *ngIf="selectedCommentary" class="card">
                <div class="card-header">
                    <strong>{{selectedCommentary.$.type}}: {{selectedCommentary.$.srs}} ({{selectedCommentary.$.mnum}})</strong>
                </div>
                <div class="card-body">
                    <h5 class="card-title">{{selectedCommentary.$.mchDesc}}</h5>

                    <div *ngFor="let time of selectedCommentary.Tme">
                        <h6 class="card-text">Started on {{time.$.Dt}} at {{time.$.stTme}} Hrs GMT</h6>
                        <h6 *ngIf="time.$?.enddt && selectedCommentary.$.type == 'TEST'" class="card-text">End date: {{time.$.enddt}}</h6>
                    </div>
                    <hr>

                    <h6 class="card-subtitle mb-2 text-muted" *ngFor="let state of selectedCommentary.state">
                        {{state.$.status}}
                        <br> <span *ngIf="state.$.decisn"> {{state.$.TW}} Decided to {{state.$.decisn}} First</span>
                    </h6>
                    <hr>

                    <h6 class="card-text" *ngFor="let mom of selectedCommentary.manofthematch">
                        Man of the Match:
                        <span *ngFor="let mom1 of mom?.mom">{{mom1.$.Name}}</span>
                    </h6>
                    <h6 class="card-text" *ngFor="let mos of selectedCommentary.ManOftheSeries">
                        Man of the Series:
                        <span *ngFor="let mos1 of mos?.mos">{{mos1.$.Name}}</span>
                    </h6>
                    <hr *ngIf="selectedCommentary.manofthematch?.length > 0 || selectedCommentary.ManOftheSeries?.length > 0">

                    <!-- Tabs -->
                    <ul class="nav nav-tabs card-header-tabs">
                        <li class="nav-item">
                            <a class="nav-link {{(selectedTab === 'Commentary')? 'active':''}}" style="cursor:pointer" (click)="selectedTab='Commentary'">Commentary</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {{(selectedTab === 'Scorecard')? 'active':''}}" style="cursor:pointer" (click)="selectedTab='Scorecard'">Scorecard</a>
                        </li>
                    </ul>
                    <br>

                    <!-- Commentry -->
                    <div *ngIf="selectedTab === 'Commentary'">

                        <div class="card-text" *ngFor="let score of selectedCommentary.mscr">

                            <div class="row">
                                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" *ngIf="score.btTm[0]?.Inngs?.length > 0">
                                     <!-- Batting Team Score -->
                                    <h6 class="card-text gap-bottom">
                                        <span>{{score.btTm[0].$.sName}}: </span>
                                        <br>
                                        <div *ngFor="let inn of score.btTm[0].Inngs">{{inn.$.desc}}: {{inn.$.r}}/{{inn.$.wkts}} ({{inn.$.ovrs}} Overs)</div>
                                    </h6>
                                </div>
                                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" *ngIf="score.blgTm[0]?.Inngs?.length > 0">
                                     <!-- Bowling Team Score -->
                                    <h6 class="card-text">
                                        <span>{{score.blgTm[0].$.sName}}: </span>
                                        <br>
                                        <div *ngFor="let inn of score.blgTm[0].Inngs">{{inn.$.desc}}: {{inn.$.r}}/{{inn.$.wkts}} ({{inn.$.ovrs}} Overs)</div>
                                    </h6>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 gap-bottom" *ngIf="score.btsmn?.length > 0">
                                     <!-- Batsman Stats -->
                                    <!-- <h6 class="card-text">Batsman:</h6> -->
                                    <div *ngFor="let batsman of score.btsmn">
                                        <h6 class="card-text">
                                            {{batsman.$.sName}}: {{batsman.$.r}}({{batsman.$.b}})
                                        </h6>
                                    </div>
                                </div>
                                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 gap-bottom" *ngIf="score.blrs?.length > 0">
                                     <!-- Bowler Stats -->
                                    <!-- <h6 class="card-text">Bowler:</h6> -->
                                    <div *ngFor="let bowler of score.blrs">
                                        <h6 class="card-text">
                                            {{bowler.$.sName}}: {{bowler.$.ovrs}} - {{bowler.$.mdns}} - {{bowler.$.r}} - {{bowler.$.wkts}}
                                        </h6>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12" *ngFor="let inng of score.inngsdetail">
                                    <br>
                                    <h6 class="card-text">Current Rate: {{inng.$.crr}}</h6>
                                    <h6 class="card-text">Required Rate: {{inng.$.rrr}}</h6>
                                    <h6 class="card-text">Partnership: {{inng.$.cprtshp}}</h6>
                                </div>
                            </div>
                        </div>
                        <hr>

                        <!-- Commentry -->
                        <div *ngFor="let commentry of selectedCommentary.comm">
                            <div class="alert alert-info" role="alert" *ngFor="let comStmnt of commentry.c">
                                <span [innerHTML]="comStmnt"></span>
                            </div>
                        </div>
                    </div>

                    <!-- ScoreCard -->
                    <div *ngIf="selectedTab === 'Scorecard'">
                        <app-cricket-scorecard [scorecardURL]="selectedCommentary.$.datapath">
                        </app-cricket-scorecard>
                    </div>

                </div>
            </div>
        </div>

    </div>

</ng-container>